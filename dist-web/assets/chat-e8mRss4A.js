import{r as b,u as N,j as e}from"./vendor-router-CPTlqXim.js";import{c as y,u as v,a as w,B as n,P as C}from"./index-C-20UPTl.js";import{A as k}from"./arrow-left-BkurjK4n.js";import{M as D}from"./menu-D5kQbloa.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-state-CFIo5cux.js";import"./vendor-ui-vdmVN549.js";const I=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],M=y("send",I);function L(){const{currentChatId:l,chats:m,addMessage:x,isProcessing:a,createChat:i,setCurrentChat:d,toggleSidebar:u}=v(),[t,o]=b.useState(""),h=N(),{isDesktop:p,isMobileView:f}=w(),r=m.find(s=>s.id===l),c=()=>{if(!t.trim()||a)return;let s=l;s||(s=i(),d(s)),x(s,{role:"user",content:t.trim()}),o("")},j=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),c())},g=()=>{const s=i();d(s)};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("header",{className:"border-b border-border px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[f?e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>h({to:"/"}),children:e.jsx(k,{className:"w-5 h-5"})}):p?e.jsx(n,{variant:"ghost",size:"sm",onClick:u,children:e.jsx(D,{className:"w-5 h-5"})}):null,e.jsx("h1",{className:"text-lg sm:text-xl font-semibold truncate max-w-[200px] sm:max-w-none",children:r?.title||"新对话"})]}),e.jsxs(n,{size:"sm",onClick:g,children:[e.jsx(C,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"新对话"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 sm:px-6 space-y-4 scrollbar-thin",children:[!r||r.messages.length===0?e.jsx("div",{className:"text-center text-muted-foreground mt-20",children:e.jsx("p",{children:"开始你的对话..."})}):r.messages.map(s=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[85%] sm:max-w-[75%] lg:max-w-[65%] rounded-lg px-4 py-2 ${s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words",children:s.content})})},s.id)),a&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg px-4 py-2",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{className:"border-t border-border p-3 sm:p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:s=>o(s.target.value),onKeyDown:j,placeholder:"输入消息...",className:"flex-1 px-4 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring text-sm sm:text-base",disabled:a}),e.jsx(n,{onClick:c,disabled:a||!t.trim(),children:e.jsx(M,{className:"w-4 h-4"})})]})})]})}export{L as default};
